<head>
  <title>Friend Fusion</title>
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>

  <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
  <%= javascript_include_tag "application", "data-turbo-track": "reload", defer: true %>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Meow+Script&display=swap" rel="stylesheet">
</head>

<div id="heroCarousel" class="carousel slide" data-bs-ride="carousel">
  <div class="carousel-inner">

    <!-- Slide 1 -->
    <div class="carousel-item active">
      <!-- Desktop -->
      <div class="d-none d-md-flex align-items-end text-center text-white w-100 position-relative"
           style="min-height: 70vh; min-width: 100vw; background-image: url(<%= image_path 'banner1.jpg' %>);
                  background-size: cover; background-position: center; background-repeat: no-repeat">
        <%# <div class="container mb-4">
          <h1 class="display-4 meow-script">Welcome to Friend Fusion</h1>
          <p class="lead meow-script">Connect, chat, and grow together.</p>
        </div> %>
      </div>

      <!-- Mobile -->
      <div class="d-flex d-md-none align-items-end text-center text-white w-100 position-relative"
           style="min-height: 300px; background-image: url(<%= image_path 'banner1.jpg' %>);
                background-size: cover; background-position: center; background-repeat: no-repeat">
        <%# <div class="container mb-3">
          <h1 class="h3 meow-script">Welcome to Friend Fusion</h1>
          <p class="small meow-script">Connect, chat, and grow together.</p>
        </div> %>
      </div>
    </div>

    <!-- Slide 2 -->
    <div class="carousel-item">
      <!-- Desktop -->
      <div class="d-none d-md-flex align-items-end text-center text-white w-100 position-relative"
           style="min-height: 70vh; min-width: 100vw; background-image: url(<%= image_path 'banner2.jpg' %>);
                  background-size: cover; background-position: center; background-repeat: no-repeat">
        <%# <div class="container mb-4">
          <h1 class="display-4 meow-script" style="color: #c2c1baff;">AI-powered Conversations</h1>
          <p class="lead meow-script">Smart, playful, and emotionally aware.</p>
        </div> %>
      </div>

      <!-- Mobile -->
      <div class="d-flex d-md-none align-items-end text-center text-white w-100 position-relative"
           style="min-height: 300px; background-image: url(<%= image_path 'banner2.jpg' %>);
                  background-size: cover; background-position: center; background-repeat: no-repeat">
        <%# <div class="container mb-3">
          <h1 class="h3 meow-script">AI-powered Conversations</h1>
          <p class="small meow-script">Smart, playful, and emotionally aware.</p>
        </div> %>
      </div>
    </div>

  </div>

  <!-- Carousel controls -->
  <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
    <span class="carousel-control-prev-icon"></span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
    <span class="carousel-control-next-icon"></span>
  </button>
</div>


<div class="container my-5">
  <!-- Topics Section Header -->
  <div class="text-center mb-5">
    <h2 class="topics-heading">
      <span class="gradient-text">Explore</span> Language Communities
    </h2>
    <p class="topics-subtitle text-muted">
      Join events, connect with native speakers, and immerse yourself in new cultures
    </p>
  </div>

  <!-- Topics Grid -->
  <div class="row g-4">
    <% @topics.each do |topic| %>
      <div class="col-12 col-sm-6 col-lg-4">
        <%= link_to topic_events_path(topic), class: "topic-card-link" do %>
          <div class="topic-card">
            <div class="topic-card-header">
              <div class="topic-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="currentColor" class="bi bi-translate" viewBox="0 0 16 16">
                  <path d="M4.545 6.714 4.11 8H3l1.862-5h1.284L8 8H6.833l-.435-1.286H4.545zm1.634-.736L5.5 3.956h-.049l-.679 2.022H6.18z"/>
                  <path d="M0 2a2 2 0 0 1 2-2h7a2 2 0 0 1 2 2v3h3a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-3H2a2 2 0 0 1-2-2V2zm2-1a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H2zm7.138 9.995c.193.301.402.583.63.846-.748.575-1.673 1.001-2.768 1.292.178.217.451.635.555.867 1.125-.359 2.08-.844 2.886-1.494.777.665 1.739 1.165 2.93 1.472.133-.254.414-.673.629-.89-1.125-.253-2.057-.694-2.82-1.284.681-.747 1.222-1.651 1.621-2.757H14V8h-3v1.047h.765c-.318.844-.74 1.546-1.272 2.13a6.066 6.066 0 0 1-.415-.492 1.988 1.988 0 0 1-.94.31z"/>
                </svg>
              </div>
              <h3 class="topic-name"><%= topic.topic_name %></h3>
            </div>
            <p class="topic-description">
              <%= topic.topic_description %>
            </p>
            <div class="topic-card-footer">
              <span class="view-events">
                View Events
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right ms-1" viewBox="0 0 16 16">
                  <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"/>
                </svg>
              </span>
              <% if topic.events.any? %>
                <div class="event-count-badge">
                  <%= topic.events.count %> <%= topic.events.count == 1 ? 'event' : 'events' %>
                </div>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
</div>

<style>
  /* Topics Section */
  .topics-heading {
    font-size: 2.5rem;
    font-weight: 800;
    margin-bottom: 1rem;
  }

  .gradient-text {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .topics-subtitle {
    font-size: 1.1rem;
    max-width: 600px;
    margin: 0 auto;
  }

  /* Topic Card */
  .topic-card-link {
    text-decoration: none;
    color: inherit;
    display: block;
    height: 100%;
  }

  .topic-card {
    background: white;
    border-radius: 20px;
    padding: 2rem;
    height: 100%;
    display: flex;
    flex-direction: column;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
    transition: all 0.3s ease;
    border: 2px solid transparent;
  }

  .topic-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 15px 40px rgba(102, 126, 234, 0.2);
    border-color: #667eea;
  }

  .topic-card-header {
    margin-bottom: 1.5rem;
  }

  .topic-icon {
    width: 60px;
    height: 60px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 15px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    margin-bottom: 1rem;
  }

  .topic-name {
    font-size: 1.5rem;
    font-weight: 700;
    color: #2d3748;
    margin: 0;
  }

  .topic-description {
    color: #718096;
    font-size: 0.95rem;
    line-height: 1.6;
    flex: 1;
    margin-bottom: 1.5rem;
  }

  .topic-card-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-top: 1rem;
    border-top: 1px solid #e9ecef;
  }

  .view-events {
    color: #667eea;
    font-weight: 600;
    font-size: 0.95rem;
    display: inline-flex;
    align-items: center;
    transition: gap 0.3s ease;
  }

  .topic-card:hover .view-events {
    gap: 0.5rem;
  }

  .event-count-badge {
    background: #f0f4ff;
    color: #667eea;
    padding: 0.4rem 0.8rem;
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 600;
  }

  /* Responsive */
  @media (max-width: 768px) {
    .topics-heading {
      font-size: 2rem;
    }

    .topic-card {
      padding: 1.5rem;
    }

    .topic-name {
      font-size: 1.25rem;
    }
  }
</style>
