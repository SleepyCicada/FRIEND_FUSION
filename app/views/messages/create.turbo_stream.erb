<%# Append user message %>
<%= turbo_stream.append "chat-messages" do %>
  <%= render partial: 'messages/message', locals: { message: @message } %>
<% end %>

<%# If AI message was generated, append it too %>
<% if @ai_message %>
  <%= turbo_stream.append "chat-messages" do %>
    <%= render partial: 'messages/message', locals: { message: @ai_message } %>
  <% end %>
<% end %>

<%# Clear the input field %>
<%= turbo_stream.update "message-input" do %>
  <input type="text" name="message_text" placeholder="Type your message..." class="form-control chat-input" required="required" id="message-input" autocomplete="off">
<% end %>
