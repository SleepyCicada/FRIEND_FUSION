<div class="organizer-profile-page">
  <div class="container py-5">
    <div class="row">
      <div class="col-lg-10 mx-auto">

        <!-- Organizer Hero Section -->
        <div class="organizer-hero mb-5">
          <div class="organizer-avatar-large">
            <%= @organizer.name&.first&.upcase || '?' %>
          </div>
          <h1 class="organizer-name"><%= @organizer.name %></h1>
          <p class="organizer-subtitle">Event Organizer</p>

          <!-- Stats Grid -->
          <div class="organizer-stats">
            <div class="stat-card">
              <div class="stat-icon">‚≠ê</div>
              <div class="stat-value"><%= @organizer.average_organizer_rating %></div>
              <div class="stat-label">Average Rating</div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">üéâ</div>
              <div class="stat-value"><%= @organizer.events_organized_count %></div>
              <div class="stat-label">Events Organized</div>
            </div>
            <div class="stat-card">
              <div class="stat-icon">üë•</div>
              <div class="stat-value"><%= @organizer.total_attendees_hosted %></div>
              <div class="stat-label">Total Attendees</div>
            </div>
          </div>
        </div>

        <!-- Events Section -->
        <% if @organized_events.any? %>
          <div class="organizer-section mb-5">
            <h2 class="organizer-section-title">
              <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" viewBox="0 0 16 16">
                <path d="M11 6.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1z"/>
                <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"/>
              </svg>
              Organized Events
            </h2>
            <div class="events-table">
              <table class="table table-hover">
                <thead>
                  <tr>
                    <th>Event</th>
                    <th>Date</th>
                    <th>Attendees</th>
                    <th>Rating</th>
                  </tr>
                </thead>
                <tbody>
                  <% @organized_events.each do |event| %>
                    <tr>
                      <td>
                        <%= link_to event.title, event_path(event), class: "event-link" %>
                      </td>
                      <td><%= event.date_time.strftime("%b %d, %Y") %></td>
                      <td>
                        <span class="badge badge-attendees">
                          <%= event.confirmations.count %> attendees
                        </span>
                      </td>
                      <td>
                        <% if event.feedback_count > 0 %>
                          <span class="badge badge-rating">
                            ‚≠ê <%= event.average_rating %> (<%= event.feedback_count %>)
                          </span>
                        <% else %>
                          <span class="text-muted">No reviews yet</span>
                        <% end %>
                      </td>
                    </tr>
                  <% end %>
                </tbody>
              </table>
            </div>
          </div>
        <% end %>

        <!-- Recent Photos Section -->
        <% if @recent_photos.any? %>
          <div class="organizer-section mb-5">
            <h2 class="organizer-section-title">
              <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" viewBox="0 0 16 16">
                <path d="M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"/>
                <path d="M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2h-12zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1h12z"/>
              </svg>
              Recent Photos from Events
            </h2>
            <div class="photos-grid">
              <% @recent_photos.each do |photo_data| %>
                <div class="photo-item">
                  <%= image_tag photo_data[:picture], alt: "Event photo" %>
                  <div class="photo-caption">
                    <%= link_to photo_data[:event].title, event_path(photo_data[:event]), class: "photo-event-link" %>
                  </div>
                </div>
              <% end %>
            </div>
          </div>
        <% end %>

        <!-- Top Reviews Section -->
        <% if @top_reviews.any? %>
          <div class="organizer-section">
            <h2 class="organizer-section-title">
              <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" viewBox="0 0 16 16">
                <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
              </svg>
              Top Reviews
            </h2>
            <div class="reviews-list">
              <% @top_reviews.each do |review| %>
                <div class="review-card">
                  <div class="review-header">
                    <div class="review-user-info">
                      <div class="review-avatar">
                        <%= review.user.name&.first&.upcase || '?' %>
                      </div>
                      <div>
                        <div class="review-user-name"><%= review.user.name %></div>
                        <div class="review-event-name">
                          <%= link_to review.event.title, event_path(review.event), class: "review-event-link" %>
                        </div>
                      </div>
                    </div>
                    <div class="review-rating">
                      <%= "‚≠ê" * review.rating %>
                    </div>
                  </div>
                  <p class="review-comment"><%= review.comment %></p>
                </div>
              <% end %>
            </div>
          </div>
        <% end %>

      </div>
    </div>
  </div>
</div>

<style>
  .organizer-profile-page {
    background: linear-gradient(180deg, #f8f9fa 0%, #ffffff 100%);
    min-height: 100vh;
  }

  .organizer-hero {
    background: white;
    border-radius: 20px;
    padding: 3rem;
    text-align: center;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
  }

  .organizer-avatar-large {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 3rem;
    margin: 0 auto 1.5rem;
    box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
  }

  .organizer-name {
    font-size: 2.5rem;
    font-weight: 800;
    color: #1a202c;
    margin-bottom: 0.5rem;
  }

  .organizer-subtitle {
    font-size: 1.25rem;
    color: #718096;
    margin-bottom: 2.5rem;
  }

  .organizer-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1.5rem;
    max-width: 800px;
    margin: 0 auto;
  }

  .stat-card {
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    border-radius: 15px;
    padding: 2rem;
    text-align: center;
    transition: all 0.3s ease;
  }

  .stat-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
  }

  .stat-icon {
    font-size: 2.5rem;
    margin-bottom: 1rem;
  }

  .stat-value {
    font-size: 2.5rem;
    font-weight: 800;
    color: #667eea;
    margin-bottom: 0.5rem;
  }

  .stat-label {
    font-size: 1rem;
    color: #718096;
    font-weight: 600;
  }

  .organizer-section {
    background: white;
    border-radius: 20px;
    padding: 2.5rem;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
  }

  .organizer-section-title {
    display: flex;
    align-items: center;
    gap: 1rem;
    font-size: 1.75rem;
    font-weight: 700;
    color: #1a202c;
    margin-bottom: 2rem;
  }

  .events-table {
    overflow-x: auto;
  }

  .events-table table {
    margin-bottom: 0;
  }

  .event-link {
    color: #667eea;
    font-weight: 600;
    text-decoration: none;
  }

  .event-link:hover {
    text-decoration: underline;
  }

  .badge-attendees {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 0.375rem 0.875rem;
    border-radius: 50px;
    font-size: 0.875rem;
    font-weight: 600;
  }

  .badge-rating {
    background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
    color: white;
    padding: 0.375rem 0.875rem;
    border-radius: 50px;
    font-size: 0.875rem;
    font-weight: 600;
  }

  .photos-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 1.5rem;
  }

  .photo-item {
    position: relative;
    border-radius: 15px;
    overflow: hidden;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    transition: all 0.3s ease;
  }

  .photo-item:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
  }

  .photo-item img {
    width: 100%;
    height: 250px;
    object-fit: cover;
    display: block;
  }

  .photo-caption {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent);
    padding: 2rem 1rem 1rem;
  }

  .photo-event-link {
    color: white;
    font-weight: 600;
    text-decoration: none;
    font-size: 0.95rem;
  }

  .photo-event-link:hover {
    text-decoration: underline;
  }

  .reviews-list {
    display: grid;
    gap: 1.5rem;
  }

  .review-card {
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    border-radius: 15px;
    padding: 1.75rem;
    transition: all 0.3s ease;
  }

  .review-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
  }

  .review-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 1rem;
  }

  .review-user-info {
    display: flex;
    align-items: center;
    gap: 1rem;
  }

  .review-avatar {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 1.25rem;
    flex-shrink: 0;
  }

  .review-user-name {
    font-weight: 700;
    color: #1a202c;
    font-size: 1.125rem;
  }

  .review-event-name {
    font-size: 0.875rem;
    margin-top: 0.25rem;
  }

  .review-event-link {
    color: #667eea;
    text-decoration: none;
  }

  .review-event-link:hover {
    text-decoration: underline;
  }

  .review-rating {
    font-size: 1.25rem;
    line-height: 1;
  }

  .review-comment {
    color: #4a5568;
    line-height: 1.7;
    font-size: 1rem;
    margin: 0;
  }

  @media (max-width: 768px) {
    .organizer-name {
      font-size: 2rem;
    }

    .organizer-stats {
      grid-template-columns: 1fr;
    }

    .photos-grid {
      grid-template-columns: 1fr;
    }

    .review-header {
      flex-direction: column;
      gap: 1rem;
    }
  }
</style>
