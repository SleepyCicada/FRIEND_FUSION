<hr>

<div class="mt-4">
  <h4 class="mb-3">Conversation Starters ğŸ’¬</h4>

  <!-- Button to trigger the AI call -->
  <%= button_to "Generate Starters",
        conversation_starters_event_path(@event),
        method: :get,
        form: { data: { turbo_stream: true } },
        class: "btn btn-secondary",
        id: "starter-button" %>

  <!-- Spinner (hidden by default) -->
  <div id="starter-loading" class="text-muted mt-2" style="display:none;">
    <div class="spinner-border spinner-border-sm"></div>
    Generating ideas...
  </div>

  <!-- Placeholder where AI starters will appear -->
  <div id="conversation-starters" class="mt-3"></div>
</div>

<script>
  document.addEventListener("turbo:before-fetch-request", (e) => {
    const target = e.target;

    // Only for conversation starter button
    if (target.id === "starter-button") {
      document.getElementById("starter-loading").style.display = "block";
    }
  });
</script>
